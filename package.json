{
  "name": "app",
  "license": "SEE LICENSE IN LICENSE",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --turbopack",
    "cap:sync": "npx cap sync",
    "cap:ios": "npx cap open ios",
    "cap:android": "npx cap open android",
    "postinstall": "prisma generate",
    "build": "NODE_OPTIONS='--max-old-space-size=8192' pnpm run generate:sitemap-last-modified && NODE_OPTIONS='--max-old-space-size=8192' next build",
    "generate:sitemap-last-modified": "node scripts/generate-sitemap-last-modified.js",
    "start": "next start",
    "lint": "eslint . --fix --ext .ts,.tsx",
    "lint:check": "eslint . --ext .ts,.tsx",
    "setup-db": "tsx scripts/setup-database.ts",
    "create-pricing-tiers": "tsx scripts/create-stripe-pricing-tiers.ts",
    "create-pricing-tiers:dry": "tsx scripts/create-stripe-pricing-tiers.ts --dry-run",
    "create-shop-products": "tsx scripts/create-shop-products.ts",
    "create-shop-products:dry": "tsx scripts/create-shop-products.ts --dry-run",
    "migrate:subscriptions": "tsx scripts/migrate-subscriptions.ts",
    "migrate:subscriptions:check": "tsx scripts/migrate-subscriptions.ts --check",
    "prisma:generate": "prisma generate",
    "prisma:migrate": "prisma migrate dev",
    "prisma:migrate:deploy": "prisma migrate deploy",
    "prisma:studio": "prisma studio",
    "generate-moon-packs": "tsx scripts/generate-moon-packs.ts",
    "generate-moon-packs:dry": "tsx scripts/generate-moon-packs.ts --dry-run",
    "generate-cta-examples": "tsx scripts/generate-cta-examples.ts",
    "generate-moon-packs:monthly": "tsx scripts/generate-moon-packs.ts --type=monthly",
    "generate-moon-packs:quarterly": "tsx scripts/generate-moon-packs.ts --type=quarterly",
    "generate-moon-packs:yearly": "tsx scripts/generate-moon-packs.ts --type=yearly",
    "generate:themes": "tsx scripts/generateThemesFromSitemap.ts",
    "record:app-features": "tsx scripts/record-app-features.ts",
    "record:app-features:one": "tsx scripts/record-app-features.ts",
    "record:app-features:suite": "tsx scripts/record-app-features.ts --suite",
    "convert:app-demos": "bash scripts/convert-app-demos.sh",
    "compose:tiktok": "tsx scripts/compose-tiktok.ts",
    "deploy:worker": "bash scripts/deploy-worker.sh",
    "prepare": "husky",
    "shop:sync": "tsx scripts/sync-all-shop-products.ts",
    "shop:sync:dry": "tsx scripts/sync-all-shop-products.ts --dry-run",
    "shop:sync:one": "tsx scripts/sync-all-shop-products.ts --limit 1",
    "shop:sync:one:dry": "tsx scripts/sync-all-shop-products.ts --limit 1 --dry-run",
    "shop:sync:per-category": "tsx scripts/sync-all-shop-products.ts --per-category 1",
    "shop:sync:per-category:dry": "tsx scripts/sync-all-shop-products.ts --per-category 1 --dry-run",
    "shop:sync:spell": "tsx scripts/sync-all-shop-products.ts --category spell",
    "shop:sync:spell:dry": "tsx scripts/sync-all-shop-products.ts --category spell --dry-run",
    "shop:sync:crystal": "tsx scripts/sync-all-shop-products.ts --category crystal",
    "shop:sync:crystal:dry": "tsx scripts/sync-all-shop-products.ts --category crystal --dry-run",
    "shop:sync:tarot": "tsx scripts/sync-all-shop-products.ts --category tarot",
    "shop:sync:tarot:dry": "tsx scripts/sync-all-shop-products.ts --category tarot --dry-run",
    "shop:sync:seasonal": "tsx scripts/sync-all-shop-products.ts --category seasonal",
    "shop:sync:seasonal:dry": "tsx scripts/sync-all-shop-products.ts --category seasonal --dry-run",
    "shop:sync:astrology": "tsx scripts/sync-all-shop-products.ts --category astrology",
    "shop:sync:astrology:dry": "tsx scripts/sync-all-shop-products.ts --category astrology --dry-run",
    "shop:sync:birthchart": "tsx scripts/sync-all-shop-products.ts --category birthchart",
    "shop:sync:birthchart:dry": "tsx scripts/sync-all-shop-products.ts --category birthchart --dry-run",
    "shop:sync:retrograde": "tsx scripts/sync-all-shop-products.ts --category retrograde",
    "shop:sync:retrograde:dry": "tsx scripts/sync-all-shop-products.ts --category retrograde --dry-run",
    "shop:sync:resync": "tsx scripts/sync-all-shop-products.ts --skip-existing false",
    "db:add-analytics-indexes": "tsx scripts/add-analytics-indexes.ts",
    "db:create-daily-metrics": "tsx scripts/create-daily-metrics-table.ts",
    "db:backfill-metrics": "tsx scripts/backfill-daily-metrics.ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:unit": "jest --testPathPatterns=unit",
    "test:integration": "jest --testPathPatterns=integration",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:headed": "playwright test --headed",
    "test:e2e:debug": "playwright test --debug",
    "test:e2e:quick": "playwright test --grep '@smoke'",
    "test:e2e:smoke": "playwright test --grep '@smoke'",
    "test:e2e:shard": "playwright test --shard=$SHARD_ID/$TOTAL_SHARDS",
    "test:single": "bash scripts/test-single.sh",
    "test:all": "pnpm test && pnpm test:e2e",
    "test:cors": "tsx scripts/test-cors.ts",
    "test:middleware": "tsx scripts/test-middleware.ts",
    "qa:check": "tsx scripts/qa-checklist.ts",
    "qa:check:prod": "BASE_URL=https://lunary.app tsx scripts/qa-checklist.ts",
    "qa:check:lighthouse": "USE_LIGHTHOUSE_CLI=true tsx scripts/qa-checklist.ts",
    "qa:e2e": "playwright test e2e/qa-checklist.spec.ts",
    "qa:e2e:prod": "BASE_URL=https://lunary.app playwright test e2e/qa-checklist.spec.ts",
    "seo:e2e": "playwright test e2e/journeys/18-seo.spec.ts",
    "seo:e2e:prod": "BASE_URL=https://lunary.app playwright test e2e/journeys/18-seo.spec.ts",
    "analyze": "ANALYZE=true pnpm build",
    "generate-price-mapping": "tsx scripts/generate-price-mapping.ts",
    "fx:check": "tsx scripts/check-fx-drift.ts",
    "fx:resolve": "tsx scripts/resolve-fx-drift.ts",
    "fx:apply:commit": "tsx scripts/fx-apply-and-commit.ts",
    "backfill:stripe-subs": "tsx scripts/backfill-stripe-subscriptions.ts",
    "backfill:stripe-subs:dry": "tsx scripts/backfill-stripe-subscriptions.ts --dry-run",
    "update-yearly-pricing": "tsx scripts/update-yearly-pricing.ts",
    "fix-usd-yearly-price": "tsx scripts/fix-usd-yearly-price.ts",
    "seed:yearly": "tsx scripts/seed-yearly-forecast.ts",
    "cleanup": "bash scripts/dev-cleanup.sh",
    "cleanup:port": "bash scripts/cleanup-port-3000.sh",
    "clear-cache": "bash scripts/clear-all-cache.sh",
    "discord:register": "tsx scripts/register-discord-commands.ts",
    "backfill:moon-circle": "tsx scripts/backfill-moon-circle.ts",
    "delete:moon-circle": "tsx scripts/delete-moon-circle.ts",
    "backfill:signups": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-signups.ts",
    "backfill:signups:dry": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-signups.ts --dry-run",
    "backfill:conversion-plan-type": "tsx scripts/backfill-conversion-plan-type.ts",
    "backfill:conversion-plan-type:dry": "tsx scripts/backfill-conversion-plan-type.ts --dry-run",
    "backfill:posthog-activity": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-posthog-activity.ts",
    "backfill:posthog-activity:dry": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-posthog-activity.ts --dry-run",
    "backfill:posthog-events": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-posthog-events.ts",
    "backfill:posthog-events:dry": "DOTENV_CONFIG_PATH=.env.local tsx scripts/backfill-posthog-events.ts --dry-run",
    "run:cron": "tsx scripts/run-cron.ts",
    "audit:grimoire-built": "tsx scripts/audit-grimoire-links-built.ts",
    "audit:entitlements": "tsx scripts/auditEntitlements.ts",
    "grimoire:index": "tsx scripts/build-grimoire-search-index.ts",
    "check": "pnpm lint && pnpm test && pnpm test:e2e:smoke",
    "check:all": "pnpm lint && pnpm test && pnpm test:e2e:smoke && pnpm build",
    "legacy:audit": "tsx tools/remove-legacy-framework.ts",
    "legacy:purge": "tsx tools/remove-legacy-framework.ts --delete-scripts --execute",
    "security:semgrep": "semgrep --config=auto .",
    "security:codeql:db": "codeql database create codeql-db --language=javascript --source-root=.",
    "security:codeql": "codeql database analyze codeql-db javascript-security-and-quality --format=sarif-latest --output=codeql-results.sarif",
    "security:osv": "osv-scanner --lockfile=pnpm-lock.yaml",
    "security:audit": "pnpm audit",
    "security:all": "pnpm security:semgrep && pnpm security:codeql:db && pnpm security:codeql && pnpm security:osv && pnpm security:audit",
    "cron:daily": "curl -sS -H \"Authorization: Bearer $CRON_SECRET\" \"http://localhost:3000/api/cron/daily-posts\"",
    "cron:daily:force": "curl -sS -H \"Authorization: Bearer $CRON_SECRET\" \"http://localhost:3000/api/cron/daily-posts?force=true\"",
    "cron:daily:date": "DATE=${DATE:-$(date -u +%F)}; curl -sS -H \"Authorization: Bearer $CRON_SECRET\" \"http://localhost:3000/api/cron/daily-posts?date=$DATE\"",
    "cron:daily:date:force": "DATE=${DATE:-$(date -u +%F)}; curl -sS -H \"Authorization: Bearer $CRON_SECRET\" \"http://localhost:3000/api/cron/daily-posts?force=true&date=$DATE\"",
    "cron:cta-examples": "curl -sS -H \"Authorization: Bearer $CRON_SECRET\" \"http://localhost:3000/api/cron/generate-cta-examples\"",
    "oauth:google": "tsx scripts/regenerate-google-token.ts",
    "check:quick": "pnpm lint && pnpm test"
  },
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,css,md,yml,yaml}": [
      "prettier --write"
    ]
  },
  "dependencies": {
    "@ai-sdk/anthropic": "^3.0.23",
    "@ai-sdk/openai": "^3.0.19",
    "@ai-sdk/react": "^1.2.12",
    "@astrodraw/astrochart": "^3.0.2",
    "@capacitor-firebase/messaging": "^8.0.1",
    "@capacitor/android": "^8.0.2",
    "@capacitor/cli": "^8.0.2",
    "@capacitor/core": "^8.0.2",
    "@capacitor/haptics": "^8.0.0",
    "@capacitor/ios": "^8.0.2",
    "@capacitor/share": "^8.0.0",
    "@date-fns/tz": "^1.4.1",
    "@getbrevo/brevo": "^3.0.1",
    "@mdx-js/runtime": "^2.0.0",
    "@pdf-lib/fontkit": "^1.1.1",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-switch": "^1.2.6",
    "@radix-ui/react-tabs": "^1.1.13",
    "@react-email/components": "^1.0.1",
    "@react-email/render": "^2.0.0",
    "@react-pdf/renderer": "^4.3.1",
    "@remotion/bundler": "^4.0.417",
    "@remotion/cli": "^4.0.417",
    "@remotion/renderer": "^4.0.417",
    "@stripe/stripe-js": "^7.9.0",
    "@types/better-sqlite3": "^7.6.13",
    "@types/pg": "^8.15.6",
    "@types/web-push": "^3.6.4",
    "@vercel/analytics": "^1.6.1",
    "@vercel/blob": "^2.0.0",
    "@vercel/postgres": "^0.10.0",
    "@vercel/speed-insights": "^1.3.1",
    "ai": "^6.0.49",
    "astronomy-engine": "^2.1.19",
    "better-auth": "^1.4.6",
    "better-sqlite3": "^12.5.0",
    "buffer": "^6.0.3",
    "canvas-confetti": "^1.9.4",
    "class-variance-authority": "^0.7.1",
    "classnames": "^2.5.1",
    "clsx": "^2.1.1",
    "crypto": "^1.0.1",
    "date-fns": "^4.1.0",
    "dayjs": "^1.11.19",
    "dotenv": "^17.2.3",
    "fast-xml-parser": "^4.5.0",
    "ffmpeg-static": "^5.3.0",
    "firebase": "^12.8.0",
    "firebase-admin": "^13.6.0",
    "fluent-ffmpeg": "^2.1.3",
    "googleapis": "^167.0.0",
    "import-in-the-middle": "^2.0.5",
    "lucide-react": "^0.546.0",
    "next": "15.5.7",
    "openai": "^6.10.0",
    "pdf-lib": "^1.17.1",
    "pg": "^8.16.3",
    "posthog-js": "^1.310.0",
    "posthog-node": "^5.18.0",
    "react": "^18.3.1",
    "react-day-picker": "^9.12.0",
    "react-dom": "^18.3.1",
    "react-intersection-observer": "^10.0.2",
    "recharts": "^3.5.1",
    "remark-gfm": "^4.0.1",
    "remotion": "^4.0.417",
    "require-in-the-middle": "^8.0.1",
    "resend": "^6.5.2",
    "seed-random": "^2.2.0",
    "sharp": "^0.34.5",
    "stripe": "^18.5.0",
    "swr": "^2.4.0",
    "tailwind-merge": "^3.4.0",
    "tweetnacl": "^1.0.3",
    "tz-lookup": "^6.1.25",
    "web-push": "^3.6.7",
    "zod": "^4.1.13"
  },
  "devDependencies": {
    "@next/bundle-analyzer": "^16.0.8",
    "@playwright/test": "^1.57.0",
    "@prisma/client": "^6.19.0",
    "@resvg/resvg-js": "^2.6.2",
    "@stylistic/eslint-plugin-js": "^2.13.0",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^14.6.1",
    "@types/canvas-confetti": "^1.9.0",
    "@types/fluent-ffmpeg": "^2.1.28",
    "@types/jest": "^30.0.0",
    "@types/node": "^20.19.25",
    "@types/react": "^18.3.26",
    "@types/react-dom": "^18.3.7",
    "@types/seed-random": "^2.2.4",
    "@types/tz-lookup": "^6.1.2",
    "@typescript-eslint/eslint-plugin": "^8.49.0",
    "@typescript-eslint/parser": "^8.49.0",
    "eslint": "^8.57.1",
    "eslint-config-next": "15.5.7",
    "eslint-config-prettier": "^9.1.2",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-plugin-unused-imports": "^4.3.0",
    "husky": "^9.1.7",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "lint-staged": "^16.2.7",
    "postcss": "^8.5.6",
    "prettier": "^3.7.4",
    "prisma": "^6.19.0",
    "tailwindcss": "^3.4.18",
    "tinycolor2": "^1.6.0",
    "ts-jest": "^29.4.6",
    "tsx": "^4.21.0",
    "typescript": "^5.9.3",
    "web-streams-polyfill": "^4.2.0"
  },
  "packageManager": "pnpm@9.15.0"
}
